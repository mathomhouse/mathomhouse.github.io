<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Titan Gear Selector</title>
  <link rel="stylesheet" href="test/index2.css">
</head>
<body>

  <div class="container">
    <h1>Titan Gear Selector</h1>

    <label for="branch">Choose Branch:</label>
    <select id="branch" onchange="filterHeroesByRole()">
      <option value="">-- Select Branch --</option>
      <option value="Army">Army</option>
      <option value="Navy">Navy</option>
      <option value="Air Force">Air Force</option>
    </select>
    <br>
    <label for="heroAttack">Attack Hero:</label>
    <select id="heroAttack"></select>
    <br>
    <label for="heroHP">HP Hero:</label>
    <select id="heroHP"></select>
    <br>
    <label for="heroIndestructible">Indestructible Hero:</label>
    <select id="heroIndestructible"></select>

    <div class="calculate-btn">
      <button onclick="showGear()">Show Optimal Gear</button>
    </div>

    <div id="results" class="gear-container"></div>
  </div>

  <script>
    let titanGearData = [];

    fetch('titan-gear-data.json')
      .then(response => response.json())
      .then(data => {
        titanGearData = data;
      });

    function filterHeroesByRole() {
      const branch = document.getElementById('branch').value;

      const attackHeroes = titanGearData
        .filter(h => (h.Branch === branch || h.Branch === "Universal") && h.Subcategory === "Attack")
        .map(h => h.Hero);

      const hpHeroes = titanGearData
        .filter(h => (h.Branch === branch || h.Branch === "Universal") && h.Subcategory === "HP")
        .map(h => h.Hero);

      const indestructibleHeroes = titanGearData
        .filter(h => (h.Branch === branch || h.Branch === "Universal") && h.Subcategory === "Indestructible")
        .map(h => h.Hero);

      populateDropdown('heroAttack', attackHeroes);
      populateDropdown('heroHP', hpHeroes);
      populateDropdown('heroIndestructible', indestructibleHeroes);
    }

    function populateDropdown(dropdownId, heroList) {
      const select = document.getElementById(dropdownId);
      select.innerHTML = "";

      heroList.forEach(hero => {
        const option = document.createElement("option");
        option.value = hero;
        option.textContent = hero;
        select.appendChild(option);
      });
    }

    function showGear() {
      const selections = [
        document.getElementById('heroAttack').value.trim(),
        document.getElementById('heroHP').value.trim(),
        document.getElementById('heroIndestructible').value.trim()
      ];

      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      selections.forEach(heroName => {
        const gear = titanGearData.find(item => item.Hero.trim() === heroName);
        if (gear) {
          const heroBox = document.createElement('div');
          heroBox.className = 'gear-box';
          heroBox.innerHTML = `
            <h2>${gear.Hero}</h2>
            <p><strong>Gun:</strong> ${gear.Gun}</p>
            <p><strong>Chest:</strong> ${gear.Chest}</p>
            <p><strong>Optical:</strong> ${gear.Optical}</p>
            <p><strong>Headset:</strong> ${gear.Headset}</p>
            <p><strong>Arms:</strong> ${gear.Arms}</p>
            <p><strong>Boots:</strong> ${gear.Boots}</p>
          `;
          resultsDiv.appendChild(heroBox);
        } else {
          resultsDiv.innerHTML += `<p>No gear found for ${heroName}</p>`;
        }
      });
    }
  </script>

</body>
</html>
