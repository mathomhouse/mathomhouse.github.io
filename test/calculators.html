<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mathom House</title>
  <link rel="stylesheet" href="index2.css">
  <link rel="stylesheet" href="header2.css">
  <style >
    .card-link {
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .card-icon {
      margin-bottom: 0.5rem;
    }
    .card-icon img {
      width: 64px;
      height: 64px;
    }

  </style>
  <script src="header2.js" defer></script>
</head>
<body>
<header id="header-placeholder"></header>
<section class="hero-blurb">
  <div class="blurb-container">
    <h1>Welcome to Mathom House</h1>
    <p>
      A collection of tools and calculators for Top War players, created by <strong>Gikey (s2698/3355)</strong> and <strong>artu (s2698)</strong> with help from friends around the community. We built this to save you time, optimize your play, and make planning a little more fun.
    </p>
  </div>
</section>

<section id="home" class="section">
  <div class="main-links">
    <a href="#calculators">Calculators</a>
    <a href="#eternalland">Eternal Land</a>
    <a href="#enigmadominators">Enigma <br>Dominators</a>
    <a href="#feedback">Feedback<br>+<br>Support</a>
  </div>
</section>
<section id="calculators" class="section">
  <h2 class="section-title">Calculators</h2>
    <div class="cards-grid">
      <a href="exclusives.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/shard-icon.png" alt="Shard Icon">
          </div>
          <h3>Exclusive Skill Calculator</h3>
          <p>Figure out how many exclusive skill shards you need for a ES 7!</p>
        </div>
      </a>
      <a href="gems.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/gems-icon.png" alt="Gems Icon">
          </div>
          <h3>Gem Calculator</h3>
          <p>Add up how many gems you've been hoarding!</p>
        </div>
      </a>
      <a href="equipment.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/equipment-icon.png" alt="Equipment Icon">
          </div>
          <h3>Equipment Calculator</h3>
          <p>Calculate how long until your equipment can be crafted</p>
        </div>
      </a>
      <a href="components.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/components-icon.png" alt="Components Icon">
          </div>
          <h3>Components Calculator</h3>
          <p>How close are you to ROF 10?</p>
        </div>
      </a>
      <a href="resources.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/resources-icon.png" alt="Resources Icon">
          </div>
          <h3>Resources Calculator</h3>
          <p>How much Food, Oil, and Odinium do you have stocked up?</p>
        </div>
      </a>
      <a href="gear.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img id= "ht-icon" src="/images/yellow-ht-icon.png" alt="HT Icon">
          </div>
          <h3>Gear Calculator</h3>
          <p>Compare the stats between two gear</p>
        </div>
      </a>
      <a href="vit.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/vit-icon.png" alt="VIT Icon">
          </div>
          <h3>VIT Calculator</h3>
          <p>How much VIT do I have saved up? (feat. EL points calculator)</p>
        </div>
      </a>
      <a href="VIP.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/VIP-icon.png" alt="VIP Icon">
          </div>
          <h3>VIP Calculator</h3>
          <p>Do you <strong>really</strong> want to know how much you've spent on this game?</p>
        </div>
      </a>
      <a href="pets.html" class="card-link">
        <div class="card">
          <div class="card-icon">
            <img src="/images/pets-icon.png" alt="Pets Icon">
          </div>
          <h3>Pets Calculator</h3>
          <p>Find out the max stats for gold or purple pets! Made in collaboration with Tex (s2864)</p>
        </div>
      </a>
    </div>
</section>
<section id="eternalland" class="section">
  <h2 class="section-title">Eternal Land</h2>
  <div class="cards-grid">
    <a href="elstore.html" class="card-link">
      <div class="card">
        <div class="card-icon">
          <img src="/images/powerstation-icon.png" alt="Power Station Icon">
        </div>
        <h3>EL Store</h3>
        <p>Figure out what you want to buy from the EL Store</p>
      </div>
    </a>
    <a href="elpoints.html" class="card-link">
      <div class="card">
        <div class="card-icon">
          <img src="/images/eternalcity-icon.png" alt="Eternal City Icon">
        </div>
        <h3>EL Rankings Simulator</h3>
        <p>Simulate the rankings for your EL</p>
      </div>
    </a>
  </div>
</section>
<section id="enigmadominators" class="section">
  <h2 class="section-title">Enigma Dominators</h2>
  <div class="cards-grid">
    <a href="archive/edstore.html" class="card-link">
      <div class="card">
        <div class="card-icon">
          <img src="/images/ED-icon.png" alt="ED Icon">
        </div>
        <h3>ED Store</h3>
        <p>Figure out what you want to buy from the ED Store</p>
      </div>
    </a>
    <a href="archive/EnigmaDominators.html" class="card-link">
      <div class="card">
        <div class="card-icon">
          <img src="/images/ED-icon.png" alt="ED Icon">
        </div>
        <h3>ED Map</h3>
        <p>Interactive map from ED 2025.</p>
      </div>
    </a>
  </div>
</section>     
<section id="feedback" class="section">
  <h2 class="section-title">Feedback / Support</h2>
  <div class="cards-grid">
    <a href="#" class="card-link" onclick="openFeedbackModal(); return false;">
      <div class="card">
        <div class="card-icon">
          <img src="/images/feedback-icon.png" alt="Feedback Icon">
        </div>
        <h3>Submit Feedback</h3>
        <p>Found a bug? Got an idea? Let us know what you'd like to see!</p>
      </div>
    </a>
    <a href="#" class="card-link" onclick="openSupportModal(); return false;">
  <div class="card">
    <div class="card-icon">
      <img src="/images/coffee-icon.png" alt="Coffee Icon" />
    </div>
    <h3>Buy Me a Coffee</h3>
    <p>If this site has helped you, consider supporting it with a coffee!</p>
  </div>
</a>

  </div>
</section>

<button id="backToTop" onclick="scrollToTop()">â†‘</button>

<script>
document.addEventListener('DOMContentLoaded', function () {
  // Theme setup
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.dataset.theme = 'dark';
    document.getElementById('themeToggle').textContent = 'â˜€ï¸';
  }

  const toggleButton = document.getElementById('themeToggle');
  if (toggleButton) {
    toggleButton.addEventListener('click', () => {
      const isDark = document.body.dataset.theme === 'dark';
      document.body.dataset.theme = isDark ? '' : 'dark';
      localStorage.setItem('theme', isDark ? 'light' : 'dark');
      toggleButton.textContent = isDark ? 'ðŸŒ“' : 'â˜€ï¸';
    });
  }

  // Back to top visibility
  window.addEventListener('scroll', () => {
    const button = document.getElementById('backToTop');
    if (button) {
      button.classList.toggle('show', window.scrollY > 300);
    }
  });

  // Section reveal observer
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add('show');
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.section').forEach(section => observer.observe(section));

  // HT icon cycling
  const htIcons = [
    "/images/yellow-ht-icon.png",
    "/images/red-ht-icon.png",
    "/images/blue-ht-icon.png",
    "/images/ball-ht-icon.png",
    "/images/white-ht-icon.png",
    "/images/pink-ht-icon.png"
  ];

  const iconElement = document.getElementById("ht-icon");
  if (iconElement) {
    let currentIcon = 0;
    setInterval(() => {
      iconElement.style.opacity = 0;
      iconElement.addEventListener('transitionend', function handler() {
        iconElement.removeEventListener('transitionend', handler);
        currentIcon = (currentIcon + 1) % htIcons.length;
        iconElement.src = htIcons[currentIcon];
        iconElement.style.opacity = 1;
      });
    }, 5000);
  }

  // Feedback modal character counter
  const feedbackInput = document.getElementById('modal-feedback-input');
  const charCount = document.getElementById('char-count');
  if (feedbackInput && charCount) {
    feedbackInput.addEventListener('input', function () {
      charCount.textContent = this.value.length;
    });
  }

  // Feedback modal controls
  window.openFeedbackModal = function () {
    document.getElementById('feedback-modal').classList.remove('hidden');
    document.getElementById('modal-backdrop').classList.remove('hidden');
  };

  window.closeFeedbackModal = function () {
    document.getElementById('feedback-modal').classList.add('hidden');
    document.getElementById('modal-backdrop').classList.add('hidden');
    document.getElementById('feedback-confirmation').classList.add('hidden');
  };

  window.submitModalFeedback = function () {
    const type = document.getElementById('feedback-type').value;
    const feedback = document.getElementById('modal-feedback-input').value.trim();
    const discord = document.getElementById('discord-name').value.trim();
    const pageURL = window.location.href;

    if (!feedback) {
      alert("Please enter your feedback.");
      return;
    }

    const localTime = new Date().toLocaleString('en-US', {
      timeZone: 'America/Los_Angeles',
      dateStyle: 'medium',
      timeStyle: 'short'
    });

    const userLang = navigator.language || navigator.userLanguage;

    const formURL = 'https://docs.google.com/forms/d/e/1FAIpQLSerJUAkcskPE5sDyrMarZoskzm6wpN2HvHzPeKxjnFmPZHddg/formResponse';
    const formData = new FormData();
    formData.append('entry.1593678335', type);
    formData.append('entry.486773277', feedback);
    formData.append('entry.1545987824', discord);

    fetch(formURL, {
      method: 'POST',
      mode: 'no-cors',
      body: formData
    });

    const discordWebhookUrl = 'https://discord.com/api/webhooks/1372702749145436160/T2Up9M6X6ZkgAU10Yw5zFTR6XBDiSs7cU33So9McJZp7SP504koGAIbQ7APYS9jx9TEN';
    const discordPayload = {
      embeds: [{
        title: "ðŸ“¬ New Feedback Submitted",
        color: 3447003,
        fields: [
          { name: "ðŸ—‚ï¸ Type", value: type, inline: true },
          { name: "ðŸ‘¤ Discord", value: discord || "N/A", inline: true },
          { name: "ðŸ“ Message", value: feedback },
          { name: "ðŸ“ Page", value: pageURL },
          { name: "ðŸŒ Language", value: userLang, inline: true },
          { name: "ðŸ•’ Local Time (PST)", value: localTime, inline: true }
        ],
        timestamp: new Date().toISOString()
      }]
    };

    fetch(discordWebhookUrl, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(discordPayload)
    });

    document.getElementById('modal-feedback-input').value = '';
    document.getElementById('discord-name').value = '';
    charCount.textContent = '0';

    showToast("âœ… Feedback submitted!");
    setTimeout(() => closeFeedbackModal(), 3000);
  };

  function showToast(message) {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
  }

  // Support modal
  window.openSupportModal = function () {
    document.getElementById('support-modal').classList.remove('hidden');
    document.getElementById('support-backdrop').classList.remove('hidden');
  };

  window.closeSupportModal = function () {
    document.getElementById('support-modal').classList.add('hidden');
    document.getElementById('support-backdrop').classList.add('hidden');
  };
});
</script>

<div id="feedback-modal" class="modal hidden">
  <div class="modal-content">
    <h2>Send Feedback</h2>

    <label for="feedback-type">Type of Feedback:</label>
    <select id="feedback-type">
      <option value="General">General</option>
      <option value="Bug Report">Bug Report</option>
      <option value="Feature Request">Feature Request</option>
      <option value="Design/UI">Design/UI</option>
    </select>

    <label for="modal-feedback-input">Your Feedback:</label>
    <textarea id="modal-feedback-input" placeholder="Let us know what you're thinking..." rows="5" maxlength="500"></textarea>
    <small><span id="char-count">0</span>/500</small>

    <label for="discord-name">Discord Username (optional):</label>
    <input type="text" id="discord-name" placeholder="e.g., .gikey" />

    <div class="modal-buttons">
      <button onclick="submitModalFeedback()">Submit</button>
      <button onclick="closeFeedbackModal()">Cancel</button>
    </div>

    <div id="feedback-confirmation" class="confirmation-message hidden">âœ… Feedback sent! Thank you!</div>
  </div>
</div>
<div id="modal-backdrop" class="modal-backdrop hidden" onclick="closeFeedbackModal()"></div>

<div id="modal-backdrop" class="modal-backdrop hidden" onclick="closeFeedbackModal()"></div>
<div id="toast" class="toast">âœ… Feedback submitted!</div>
<div id="support-modal" class="modal hidden">
  <div class="modal-content">
    <h2>â˜• Support This Site</h2>
    <p>If you enjoy using these tools, you can help keep them free by buying me a coffee!</p>
    <a href="https://www.buymeacoffee.com/gikey" target="_blank" rel="noopener" class="coffee-btn">Buy Me a Coffee</a>
    <div class="modal-buttons">
      <button onclick="closeSupportModal()">Close</button>
    </div>
  </div>
</div>
<div id="support-backdrop" class="modal-backdrop hidden" onclick="closeSupportModal()"></div>

</body>
</html>